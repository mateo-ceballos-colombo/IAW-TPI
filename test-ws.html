<!DOCTYPE html>
<html>

<head>
    <title>Test WebSocket</title>
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
</head>

<body>
    <h1>WS Test</h1>

    <script>
        const token = "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJ5bmlOVjlHNHNmdmdOS0h5RXpjdkNNWW9XNktSd1N4bm40S0o3X3JSZm9VIn0.eyJleHAiOjE3NjQxMjU1NzQsImlhdCI6MTc2NDEyNTI3NCwianRpIjoiMTY3MzllYTMtYmE3Yy00ODYwLWE3ZTktNGU5MTg5NzlmZmVmIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy9jb3dvcmtyZXNlcnZlIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6ImJiYWJiNjk2LTRjYTMtNDI2Yy04NDBmLTg2NmFjNmJkODIyZCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvd29yay1hcGkiLCJzZXNzaW9uX3N0YXRlIjoiMGYzNzY2ZmYtN2ZmNi00NjgxLWJlMjgtMGMxOGFkZTU1OWRjIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIvKiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsib2ZmbGluZV9hY2Nlc3MiLCJhZG1pbiIsInVtYV9hdXRob3JpemF0aW9uIiwiZGVmYXVsdC1yb2xlcy1jb3dvcmtyZXNlcnZlIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwic2lkIjoiMGYzNzY2ZmYtN2ZmNi00NjgxLWJlMjgtMGMxOGFkZTU1OWRjIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsInByZWZlcnJlZF91c2VybmFtZSI6InRwaS0yIn0.dhX5AwUCdg7ixgA0sCvCOt7pz-uUG7L2t92Z2lMlgNNXT_bNTl5v40_Yg9fgDOM8IRArYmkhmlAoOCIHKNUFJJ9oJlxZeu2rt87qlIyeI_YExotMM5mX0MCpyvR-HN6LoOUY-5T2dSX2wC-k0fepjxgTzLp3mJp2orpXvrlwaOw9EUwqFCPq6WGvOCbDx-EkhjUAesx0lD8KZmJZ7RZcuT8YQQm6erAWz_IV40uDO9yiokW5tRukXvv9AaCR8n6dHpGBOl2GP_Wht5eAbXldGwiWbw39kOC1FMYdppU4O-LmiiN7UYWgrUB4avyoWTzKnECQ69gxg3_EH6xEmd9eUg";  // poné tu JWT admin

        const socket = io("ws://localhost:5000", {
            auth: { token }
        });

        // al conectar
        socket.on("connect", () => {
            console.log("Conectado! ID:", socket.id);

            // suscribirse a una sala
            socket.emit("subscribeRoom", "<roomId>");
        });

        // si hay error (p. ej. token inválido)
        socket.on("connect_error", (err) => {
            console.error("Error de conexión:", err.message);
        });

        // si recibe actualización de ocupación
        socket.on("occupancyUpdate", (msg) => {
            console.log("OCCUPANCY UPDATE:", msg);
        });
    </script>
</body>

</html>